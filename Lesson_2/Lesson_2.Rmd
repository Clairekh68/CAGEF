---
title: "Lesson 2 - Intro to Tidy Data: How to Filter, Subset, Transform and Merge your Data"
output: 
  html_document:
          keep_md: yes
          toc: TRUE
          toc_depth: 3
  html_notebook:
          toc: TRUE
          toc_depth: 3
---
***

Approximate time: 2 hours per lesson

 _Each lesson will have:_
 
 - Comprehension questions as we go along on Socrative.
 - How to read help pages online.
 - Give the class a function not previously used during the lesson and have them figure out what it does and how to use it.
 - Each lesson will start from an excel spreadsheet with imperfect data.


***
__Objective:__ At the end of this session you will know the principles of tidy data, and be able to subset and transform your data, merge data frames, and perform simple calculations.

_Why tidy data?_

- Know the principles of tidy data and why it is useful to have your data in this format

Tidy data has:

1. Each variable forms a column.
2. Each observation forms a row.
3. Each type of observational unit forms a table.

This seems pretty straight forward, and it is. It is the datasets you get that will not be straight forward.

The 5 most common problems with messy datasets are:
-common headers are values, not variable names
-multiple variables in one column
-variables stored in both rows and columns
-a single variable stored in multiple tables 
-multiple types of observational units stored in the same table

Fortunately, Hadley has also given us the tools to solve these problems.

- Intro to the tidyverse

![](img/HadleyObama2.png)

![](img/tidyverse1.png)


_Data Manipulation_     

- dplyr() 
      + how to subset data
      + how to order data
      + filter(), select(), arrange(), glance()
- tidyr() 
      + transforming data from wide to long and back again (or reshape2())
      + spread(), gather(), unite(), separate()
- merging/adding data 
      + join/merge functions
      + binding functions with caveats
      
_Simple Statistics_
  
- how to perform simple calculations and store the results in new columns
    + using summarize() to get mean, median, modes, quantiles and standard deviations, variance, skew
    + using mutate() to add columns 
    + using group_by() to perform calculations on factored data 
    
- revisitng the apply() function

- performing t-tests in R
        
__Challenge:__     
Take one of the provided test sets and calculate an average that requires subsetting and grouping. Perhaps make a separate question for say, a choice of 4 datasets (cars, iris, gapminder, lotr). (Add t-test question with the gapminder dataset).
  
__Resources:__  
http://seananderson.ca/2013/10/19/reshape.html     
https://github.com/wmhall/tidyr_lesson/blob/master/tidyr_lesson.md     
http://stat545.com/block009_dplyr-intro.html     
http://stat545.com/block010_dplyr-end-single-table.html
http://vita.had.co.nz/papers/tidy-data.pdf
https://thinkr.fr/tidyverse-hadleyverse/

##Post-Lesson Assessment
***
_Questions_

- Speed: Too slow, too fast, just right
- Content: Too easy, too hard, just right
- From the description of the lesson, the content was what I expected to learn. T/F
- What was the most useful thing you learned?
- What was the least useful thing?
- Comments/suggestions for improvement.


##Notes
***
